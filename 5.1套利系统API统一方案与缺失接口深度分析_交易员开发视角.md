# ğŸ“Š 5.1å¥—åˆ©ç³»ç»ŸAPIç»Ÿä¸€æ–¹æ¡ˆä¸ç¼ºå¤±æ¥å£æ·±åº¦åˆ†ææŠ¥å‘Š
## **äº¤æ˜“å‘˜+ç¨‹åºå‘˜åŒé‡è§†è§’**

**åˆ†ææ—¶é—´**: 2025-01-27  
**ç³»ç»Ÿç‰ˆæœ¬**: 5.1å¢å¼ºç‰ˆ  
**åˆ†æè§†è§’**: äº¤æ˜“å‘˜å®æˆ˜æ“ä½œ + ç¨‹åºå‘˜æŠ€æœ¯å®ç°  
**æ ¸å¿ƒç›®æ ‡**: ä¸ç ´åç°æœ‰APIæœåŠ¡å™¨ï¼Œå®ç°å®Œæ•´ç»Ÿä¸€

---

## ğŸ¯ **æ‰§è¡Œæ€»ç»“**

### **1. APIç»Ÿä¸€æ–¹æ¡ˆ: ä¿æŠ¤æ€§ç»Ÿä¸€æ¶æ„**
- âœ… **ä¿ç•™ç°æœ‰æœåŠ¡å™¨**: ä¸ç ´åä»»ä½•ç°æœ‰APIæœåŠ¡å™¨
- âœ… **æ™ºèƒ½ä»£ç†å±‚**: é€šè¿‡ä»£ç†å®ç°ç»Ÿä¸€å…¥å£
- ğŸ”´ **ç¼ºå¤±æ¥å£**: å‘ç°**89ä¸ªå…³é”®APIæ¥å£ç¼ºå¤±** (è¿œè¶…ä¹‹å‰çš„47ä¸ª)

### **2. äº¤æ˜“å‘˜è§†è§’å‘ç°çš„å…³é”®ç¼ºå¤±**
- ğŸ”´ **å®æ—¶ä»“ä½ç®¡ç†**: ç¼ºå°‘å®æ—¶ä»“ä½è·Ÿè¸ªå’Œè°ƒæ•´API
- ğŸ”´ **èµ„é‡‘æµæ°´ç›‘æ§**: ç¼ºå°‘è¯¦ç»†çš„èµ„é‡‘æµæ°´æŸ¥è¯¢API
- ğŸ”´ **äº¤æ˜“ç»©æ•ˆåˆ†æ**: ç¼ºå°‘å®Œæ•´çš„äº¤æ˜“ç»©æ•ˆç»Ÿè®¡API
- ğŸ”´ **å¸‚åœºæœºä¼šè¿½è¸ª**: ç¼ºå°‘å¥—åˆ©æœºä¼šå†å²åˆ†æAPI

### **3. ç¨‹åºå‘˜è§†è§’å‘ç°çš„æŠ€æœ¯ç¼ºå¤±**
- ğŸ”´ **AIæ¨¡å‹ç”Ÿå‘½å‘¨æœŸç®¡ç†**: ç¼ºå°‘æ¨¡å‹è®­ç»ƒã€éƒ¨ç½²ã€ç‰ˆæœ¬ç®¡ç†API
- ğŸ”´ **æ•°æ®æ¸…æ´—ç²¾ç»†åŒ–é…ç½®**: ç¼ºå°‘äº¤æ˜“æ‰€çº§åˆ«çš„æ¸…æ´—å‚æ•°API
- ğŸ”´ **ç³»ç»Ÿæ€§èƒ½å®æ—¶è°ƒä¼˜**: ç¼ºå°‘åŠ¨æ€æ€§èƒ½å‚æ•°è°ƒæ•´API
- ğŸ”´ **æ•…éšœè‡ªæ„ˆæœºåˆ¶æ§åˆ¶**: ç¼ºå°‘è‡ªåŠ¨æ•…éšœæ¢å¤é…ç½®API

---

## ğŸ—ï¸ **1. ä¿æŠ¤æ€§APIç»Ÿä¸€æ–¹æ¡ˆ**

### **1.1 ä¸ç ´åç°æœ‰æ¶æ„çš„ç»Ÿä¸€æ–¹æ¡ˆ**

#### **æ–¹æ¡ˆæ¶æ„**: æ™ºèƒ½ä»£ç†å±‚
```
å‰ç«¯åº”ç”¨ (localhost:3003)
    â†“ ç»Ÿä¸€SDKè°ƒç”¨
æ™ºèƒ½APIä»£ç†ç½‘å…³ (localhost:3000) â† æ–°å¢ç»Ÿä¸€å…¥å£
    â”œâ”€â”€ è·¯ç”±åˆ†å‘é€»è¾‘
    â”œâ”€â”€ è®¤è¯ç»Ÿä¸€å¤„ç†  
    â”œâ”€â”€ å“åº”æ ¼å¼æ ‡å‡†åŒ–
    â””â”€â”€ è´Ÿè½½å‡è¡¡
         â†“ ä¿æŒç°æœ‰æœåŠ¡å™¨ä¸å˜
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                â”‚                â”‚              â”‚
ä¸»APIç½‘å…³        QingXiæ•°æ®API    gRPCé«˜æ€§èƒ½API   æ–°å¢é…ç½®API
(localhost:8080)  (localhost:50061) (localhost:50051) (localhost:3001)
  [ä¿æŒä¸å˜]        [ä¿æŒä¸å˜]       [ä¿æŒä¸å˜]      [æ–°å¢æœåŠ¡å™¨]
```

#### **å®ç°æ–¹æ¡ˆ**: æ¸è¿›å¼ä»£ç†
```rust
// æ–°å¢æ–‡ä»¶: src/unified_api_gateway.rs
pub struct UnifiedAPIGateway {
    // ç°æœ‰æœåŠ¡å™¨çš„ä»£ç†å®¢æˆ·ç«¯
    main_client: reqwest::Client,      // -> localhost:8080
    qingxi_client: reqwest::Client,    // -> localhost:50061  
    grpc_client: tonic::Client,        // -> localhost:50051
    config_client: reqwest::Client,    // -> localhost:3001 (æ–°å¢)
}

impl UnifiedAPIGateway {
    // æ™ºèƒ½è·¯ç”±åˆ†å‘
    pub async fn route_request(&self, req: Request) -> Response {
        match req.path() {
            // è®¤è¯å’Œç³»ç»Ÿæ§åˆ¶ -> ä¸»ç½‘å…³
            path if path.starts_with("/api/auth/") || 
                    path.starts_with("/api/system/") => {
                self.main_client.forward(req).await
            },
            
            // æ•°æ®å¤„ç† -> QingXi API
            path if path.starts_with("/api/qingxi/") || 
                    path.starts_with("/api/data/") => {
                self.qingxi_client.forward(req).await  
            },
            
            // é…ç½®ç®¡ç† -> æ–°å¢é…ç½®æœåŠ¡å™¨
            path if path.starts_with("/api/config/") => {
                self.config_client.forward(req).await
            },
            
            // é»˜è®¤ -> ä¸»ç½‘å…³
            _ => self.main_client.forward(req).await
        }
    }
}
```

### **1.2 æ¸è¿›å¼å®æ–½è®¡åˆ’**

#### **é˜¶æ®µ1: ä»£ç†å±‚éƒ¨ç½² (1å¤©)**
```bash
# 1. å¯åŠ¨ç»Ÿä¸€ä»£ç†ç½‘å…³ (ä¸å½±å“ç°æœ‰æœåŠ¡)
cd /home/ubuntu/5.1xitong/5.1ç³»ç»Ÿ
cargo run --bin unified_gateway --release

# 2. ç°æœ‰æœåŠ¡å™¨ç»§ç»­è¿è¡Œ
cargo run --release &                    # ä¸»ç½‘å…³ (8080)
cd qingxi/qingxi && cargo run --release & # QingXi API (50061)
```

#### **é˜¶æ®µ2: æ–°å¢é…ç½®æœåŠ¡å™¨ (2å¤©)**
```rust
// æ–°å¢é…ç½®æœåŠ¡å™¨ (localhost:3001)
// ä¸“é—¨å¤„ç†æ‰€æœ‰é…ç½®ç›¸å…³çš„API
pub struct ConfigAPIServer {
    // å¤„ç†æ‰€æœ‰ç¼ºå¤±çš„é…ç½®API
}
```

#### **é˜¶æ®µ3: å‰ç«¯SDKé€‚é… (1å¤©)**
```typescript
// å‰ç«¯SDKåªéœ€è¦ä¿®æ”¹ä¸€ä¸ªé…ç½®
const API_CONFIG = {
  baseURL: 'http://localhost:3000', // ç»Ÿä¸€å…¥å£
  // å…¶ä»–é…ç½®ä¿æŒä¸å˜
};
```

---

## ğŸ” **2. äº¤æ˜“å‘˜è§†è§’: å®é™…æ“ä½œç¼ºå¤±çš„API**

### **2.1 å®æ—¶ä»“ä½ç®¡ç† - å®Œå…¨ç¼ºå¤± (18ä¸ªæ¥å£)**

**äº¤æ˜“å‘˜éœ€æ±‚**: "æˆ‘éœ€è¦éšæ—¶çœ‹åˆ°æ¯ä¸ªäº¤æ˜“æ‰€çš„å®æ—¶ä»“ä½ï¼Œå¹¶èƒ½å¿«é€Ÿè°ƒæ•´"

```http
# å®æ—¶ä»“ä½æŸ¥è¯¢ (ç¼ºå¤±)
GET    /api/positions/realtime              # å®æ—¶ä»“ä½æ¦‚è§ˆ
GET    /api/positions/by-exchange/{id}      # æŒ‰äº¤æ˜“æ‰€æŸ¥è¯¢ä»“ä½
GET    /api/positions/by-symbol/{symbol}    # æŒ‰äº¤æ˜“å¯¹æŸ¥è¯¢ä»“ä½
GET    /api/positions/by-strategy/{id}      # æŒ‰ç­–ç•¥æŸ¥è¯¢ä»“ä½
GET    /api/positions/pnl/unrealized        # æœªå®ç°ç›ˆäº
GET    /api/positions/pnl/realized          # å·²å®ç°ç›ˆäº

# ä»“ä½è°ƒæ•´æ“ä½œ (ç¼ºå¤±)  
POST   /api/positions/adjust                # æ‰‹åŠ¨è°ƒæ•´ä»“ä½
POST   /api/positions/close/{id}            # å¹³ä»“æ“ä½œ
POST   /api/positions/hedge/{id}            # å¯¹å†²æ“ä½œ
POST   /api/positions/rebalance             # ä»“ä½å†å¹³è¡¡

# ä»“ä½é£é™©æ§åˆ¶ (ç¼ºå¤±)
GET    /api/positions/risk/exposure         # é£é™©æ•å£åˆ†æ
POST   /api/positions/risk/limits/set       # è®¾ç½®ä»“ä½é™åˆ¶
GET    /api/positions/risk/correlation      # ä»“ä½ç›¸å…³æ€§åˆ†æ
POST   /api/positions/risk/alert/set        # è®¾ç½®ä»“ä½å‘Šè­¦

# ä»“ä½å†å²åˆ†æ (ç¼ºå¤±)
GET    /api/positions/history/{timerange}   # å†å²ä»“ä½å˜åŒ–
GET    /api/positions/performance/stats     # ä»“ä½ç»©æ•ˆç»Ÿè®¡
GET    /api/positions/turnover/analysis     # æ¢æ‰‹ç‡åˆ†æ
GET    /api/positions/holding/duration      # æŒä»“æ—¶é•¿åˆ†æ
```

### **2.2 èµ„é‡‘æµæ°´ç›‘æ§ - éƒ¨åˆ†ç¼ºå¤± (15ä¸ªæ¥å£)**

**äº¤æ˜“å‘˜éœ€æ±‚**: "æˆ‘éœ€è¦è¯¦ç»†çš„èµ„é‡‘æµæ°´ï¼ŒçŸ¥é“æ¯ç¬”é’±æ€ä¹ˆè¿›å‡ºçš„"

```http
# èµ„é‡‘æµæ°´æŸ¥è¯¢ (ç¼ºå¤±)
GET    /api/funds/flow/realtime             # å®æ—¶èµ„é‡‘æµæ°´
GET    /api/funds/flow/history              # å†å²èµ„é‡‘æµæ°´
GET    /api/funds/flow/by-exchange/{id}     # æŒ‰äº¤æ˜“æ‰€èµ„é‡‘æµæ°´
GET    /api/funds/flow/by-strategy/{id}     # æŒ‰ç­–ç•¥èµ„é‡‘æµæ°´
GET    /api/funds/flow/by-type/{type}       # æŒ‰ç±»å‹èµ„é‡‘æµæ°´

# èµ„é‡‘åˆ†æç»Ÿè®¡ (ç¼ºå¤±)
GET    /api/funds/analysis/daily            # æ—¥èµ„é‡‘åˆ†æ
GET    /api/funds/analysis/utilization      # èµ„é‡‘åˆ©ç”¨ç‡åˆ†æ
GET    /api/funds/analysis/efficiency       # èµ„é‡‘æ•ˆç‡åˆ†æ
GET    /api/funds/analysis/cost             # èµ„é‡‘æˆæœ¬åˆ†æ

# èµ„é‡‘é¢„è­¦æ§åˆ¶ (ç¼ºå¤±)
POST   /api/funds/alerts/balance/set        # ä½™é¢é¢„è­¦è®¾ç½®
POST   /api/funds/alerts/flow/set           # æµæ°´å¼‚å¸¸é¢„è­¦
GET    /api/funds/alerts/active             # æ´»è·ƒèµ„é‡‘é¢„è­¦

# èµ„é‡‘æ“ä½œè®°å½• (ç¼ºå¤±)
GET    /api/funds/operations/history        # èµ„é‡‘æ“ä½œå†å²
POST   /api/funds/operations/transfer       # å†…éƒ¨èµ„é‡‘åˆ’è½¬
GET    /api/funds/operations/pending        # å¾…å¤„ç†èµ„é‡‘æ“ä½œ
```

### **2.3 äº¤æ˜“ç»©æ•ˆåˆ†æ - ä¸¥é‡ç¼ºå¤± (20ä¸ªæ¥å£)**

**äº¤æ˜“å‘˜éœ€æ±‚**: "æˆ‘éœ€è¦è¯¦ç»†çš„äº¤æ˜“ç»©æ•ˆæŠ¥å‘Šï¼ŒåŒ…æ‹¬èƒœç‡ã€ç›ˆäºæ¯”ã€å›æ’¤ç­‰"

```http
# ç»¼åˆç»©æ•ˆåˆ†æ (ç¼ºå¤±)
GET    /api/performance/overview            # ç»©æ•ˆæ¦‚è§ˆ
GET    /api/performance/returns/daily       # æ—¥æ”¶ç›Šåˆ†æ
GET    /api/performance/returns/monthly     # æœˆæ”¶ç›Šåˆ†æ
GET    /api/performance/sharpe-ratio        # å¤æ™®æ¯”ç‡åˆ†æ
GET    /api/performance/max-drawdown        # æœ€å¤§å›æ’¤åˆ†æ
GET    /api/performance/win-rate            # èƒœç‡ç»Ÿè®¡
GET    /api/performance/profit-loss-ratio   # ç›ˆäºæ¯”åˆ†æ

# ç­–ç•¥ç»©æ•ˆå¯¹æ¯” (ç¼ºå¤±)
GET    /api/performance/strategies/compare  # ç­–ç•¥ç»©æ•ˆå¯¹æ¯”
GET    /api/performance/strategies/ranking  # ç­–ç•¥æ’å
GET    /api/performance/strategies/risk-adjusted # é£é™©è°ƒæ•´æ”¶ç›Š

# å¸‚åœºè¡¨ç°åˆ†æ (ç¼ºå¤±)
GET    /api/performance/by-market/{market}  # æŒ‰å¸‚åœºç»©æ•ˆåˆ†æ
GET    /api/performance/by-symbol/{symbol}  # æŒ‰äº¤æ˜“å¯¹ç»©æ•ˆåˆ†æ
GET    /api/performance/correlation/market  # ä¸å¸‚åœºç›¸å…³æ€§

# é£é™©ç»©æ•ˆæŒ‡æ ‡ (ç¼ºå¤±)
GET    /api/performance/var/historical      # å†å²VaR
GET    /api/performance/stress-test         # å‹åŠ›æµ‹è¯•ç»“æœ
GET    /api/performance/risk/attribution    # é£é™©å½’å› åˆ†æ

# ç»©æ•ˆæŠ¥å‘Šç”Ÿæˆ (ç¼ºå¤±)
POST   /api/performance/reports/generate    # ç”Ÿæˆç»©æ•ˆæŠ¥å‘Š
GET    /api/performance/reports/templates   # æŠ¥å‘Šæ¨¡æ¿
GET    /api/performance/reports/history     # å†å²æŠ¥å‘Š
POST   /api/performance/reports/schedule    # å®šæ—¶æŠ¥å‘Šè®¾ç½®
```

### **2.4 å¸‚åœºæœºä¼šè¿½è¸ª - å®Œå…¨ç¼ºå¤± (16ä¸ªæ¥å£)**

**äº¤æ˜“å‘˜éœ€æ±‚**: "æˆ‘éœ€è¦çœ‹åˆ°å¥—åˆ©æœºä¼šçš„å†å²æ•°æ®ï¼Œåˆ†æå“ªäº›æœºä¼šæœ€èµšé’±"

```http
# æœºä¼šå†å²åˆ†æ (ç¼ºå¤±)
GET    /api/opportunities/history           # å¥—åˆ©æœºä¼šå†å²
GET    /api/opportunities/statistics        # æœºä¼šç»Ÿè®¡æ•°æ®
GET    /api/opportunities/success-rate      # æœºä¼šæˆåŠŸç‡åˆ†æ
GET    /api/opportunities/profit/distribution # åˆ©æ¶¦åˆ†å¸ƒåˆ†æ

# æœºä¼šç±»å‹åˆ†æ (ç¼ºå¤±)
GET    /api/opportunities/triangular/stats  # ä¸‰è§’å¥—åˆ©ç»Ÿè®¡
GET    /api/opportunities/cross-exchange/stats # è·¨äº¤æ˜“æ‰€å¥—åˆ©ç»Ÿè®¡
GET    /api/opportunities/temporal/analysis # æ—¶é—´ç»´åº¦åˆ†æ

# æœºä¼šé¢„æµ‹åˆ†æ (ç¼ºå¤±)
GET    /api/opportunities/prediction/model  # æœºä¼šé¢„æµ‹æ¨¡å‹
POST   /api/opportunities/prediction/train  # è®­ç»ƒé¢„æµ‹æ¨¡å‹
GET    /api/opportunities/prediction/forecast # æœºä¼šé¢„æµ‹

# æœºä¼šä¼˜åŒ–å»ºè®® (ç¼ºå¤±)
GET    /api/opportunities/optimization/suggestions # ä¼˜åŒ–å»ºè®®
POST   /api/opportunities/filters/optimize  # è¿‡æ»¤å™¨ä¼˜åŒ–
GET    /api/opportunities/timing/analysis   # æ—¶æœºåˆ†æ

# æœºä¼šç›‘æ§å‘Šè­¦ (ç¼ºå¤±)
POST   /api/opportunities/alerts/threshold/set # è®¾ç½®æœºä¼šå‘Šè­¦é˜ˆå€¼
GET    /api/opportunities/alerts/active     # æ´»è·ƒæœºä¼šå‘Šè­¦
POST   /api/opportunities/watchlist/add     # æ·»åŠ æœºä¼šç›‘æ§
```

---

## ğŸ› ï¸ **3. ç¨‹åºå‘˜è§†è§’: æŠ€æœ¯æ¶æ„ç¼ºå¤±çš„API**

### **3.1 AIæ¨¡å‹ç”Ÿå‘½å‘¨æœŸç®¡ç† - å®Œå…¨ç¼ºå¤± (25ä¸ªæ¥å£)**

**ç¨‹åºå‘˜éœ€æ±‚**: "éœ€è¦å®Œæ•´çš„AIæ¨¡å‹ç®¡ç†ï¼Œä»è®­ç»ƒåˆ°éƒ¨ç½²åˆ°ç›‘æ§çš„å…¨æµç¨‹API"

```http
# æ¨¡å‹è®­ç»ƒç®¡ç† (ç¼ºå¤±)
POST   /api/ml/models/train/start           # å¯åŠ¨æ¨¡å‹è®­ç»ƒ
GET    /api/ml/models/train/status/{id}     # è®­ç»ƒçŠ¶æ€æŸ¥è¯¢
POST   /api/ml/models/train/stop/{id}       # åœæ­¢æ¨¡å‹è®­ç»ƒ
GET    /api/ml/models/train/logs/{id}       # è®­ç»ƒæ—¥å¿—æŸ¥è¯¢
GET    /api/ml/models/train/metrics/{id}    # è®­ç»ƒæŒ‡æ ‡ç›‘æ§

# æ¨¡å‹ç‰ˆæœ¬ç®¡ç† (ç¼ºå¤±)
GET    /api/ml/models/versions/list         # æ¨¡å‹ç‰ˆæœ¬åˆ—è¡¨
POST   /api/ml/models/versions/create       # åˆ›å»ºæ–°ç‰ˆæœ¬
GET    /api/ml/models/versions/compare      # ç‰ˆæœ¬å¯¹æ¯”åˆ†æ
POST   /api/ml/models/versions/rollback     # ç‰ˆæœ¬å›æ»š
DELETE /api/ml/models/versions/{id}         # åˆ é™¤æ¨¡å‹ç‰ˆæœ¬

# æ¨¡å‹éƒ¨ç½²ç®¡ç† (ç¼ºå¤±)
POST   /api/ml/models/deploy/{id}           # éƒ¨ç½²æ¨¡å‹
GET    /api/ml/models/deploy/status         # éƒ¨ç½²çŠ¶æ€æŸ¥è¯¢
POST   /api/ml/models/deploy/canary         # é‡‘ä¸é›€éƒ¨ç½²
POST   /api/ml/models/deploy/rollout        # å…¨é‡éƒ¨ç½²
POST   /api/ml/models/undeploy/{id}         # ä¸‹çº¿æ¨¡å‹

# æ¨¡å‹ç›‘æ§åˆ†æ (ç¼ºå¤±)
GET    /api/ml/models/performance/realtime  # å®æ—¶æ¨¡å‹æ€§èƒ½
GET    /api/ml/models/drift/detection       # æ¨¡å‹æ¼‚ç§»æ£€æµ‹
GET    /api/ml/models/accuracy/tracking     # å‡†ç¡®ç‡è·Ÿè¸ª
GET    /api/ml/models/prediction/analysis   # é¢„æµ‹åˆ†æ
POST   /api/ml/models/retrain/trigger       # è§¦å‘é‡è®­ç»ƒ

# æ¨¡å‹é…ç½®ç®¡ç† (ç¼ºå¤±)
GET    /api/ml/models/config/{id}           # æ¨¡å‹é…ç½®æŸ¥è¯¢
PUT    /api/ml/models/config/{id}           # æ›´æ–°æ¨¡å‹é…ç½®
GET    /api/ml/models/hyperparams/{id}      # è¶…å‚æ•°æŸ¥è¯¢
PUT    /api/ml/models/hyperparams/{id}      # è¶…å‚æ•°è°ƒæ•´
POST   /api/ml/models/config/validate       # é…ç½®éªŒè¯
```

### **3.2 æ•°æ®æ¸…æ´—ç²¾ç»†åŒ–é…ç½® - ä¸¥é‡ç¼ºå¤± (22ä¸ªæ¥å£)**

**ç¨‹åºå‘˜éœ€æ±‚**: "éœ€è¦é’ˆå¯¹æ¯ä¸ªäº¤æ˜“æ‰€ã€æ¯ä¸ªäº¤æ˜“å¯¹çš„ç²¾ç»†åŒ–æ¸…æ´—é…ç½®"

```http
# äº¤æ˜“æ‰€çº§åˆ«æ¸…æ´—é…ç½® (ç¼ºå¤±)
GET    /api/cleaning/config/exchanges       # äº¤æ˜“æ‰€æ¸…æ´—é…ç½®åˆ—è¡¨
GET    /api/cleaning/config/exchange/{id}   # ç‰¹å®šäº¤æ˜“æ‰€é…ç½®
PUT    /api/cleaning/config/exchange/{id}   # æ›´æ–°äº¤æ˜“æ‰€é…ç½®
POST   /api/cleaning/config/exchange/test   # æµ‹è¯•æ¸…æ´—é…ç½®

# äº¤æ˜“å¯¹çº§åˆ«æ¸…æ´—é…ç½® (ç¼ºå¤±)
GET    /api/cleaning/config/symbols         # äº¤æ˜“å¯¹æ¸…æ´—é…ç½®åˆ—è¡¨
GET    /api/cleaning/config/symbol/{symbol} # ç‰¹å®šäº¤æ˜“å¯¹é…ç½®
PUT    /api/cleaning/config/symbol/{symbol} # æ›´æ–°äº¤æ˜“å¯¹é…ç½®
POST   /api/cleaning/config/symbol/batch    # æ‰¹é‡é…ç½®äº¤æ˜“å¯¹

# æ¸…æ´—è§„åˆ™å¼•æ“ (ç¼ºå¤±)
GET    /api/cleaning/rules/list             # æ¸…æ´—è§„åˆ™åˆ—è¡¨
POST   /api/cleaning/rules/create           # åˆ›å»ºæ¸…æ´—è§„åˆ™
PUT    /api/cleaning/rules/{id}             # æ›´æ–°æ¸…æ´—è§„åˆ™
DELETE /api/cleaning/rules/{id}             # åˆ é™¤æ¸…æ´—è§„åˆ™
POST   /api/cleaning/rules/test             # æµ‹è¯•æ¸…æ´—è§„åˆ™

# æ¸…æ´—æ€§èƒ½ä¼˜åŒ– (ç¼ºå¤±)
GET    /api/cleaning/performance/stats      # æ¸…æ´—æ€§èƒ½ç»Ÿè®¡
POST   /api/cleaning/performance/optimize   # æ€§èƒ½ä¼˜åŒ–å»ºè®®
GET    /api/cleaning/performance/bottleneck # æ€§èƒ½ç“¶é¢ˆåˆ†æ
PUT    /api/cleaning/performance/tuning     # æ€§èƒ½è°ƒä¼˜

# æ¸…æ´—è´¨é‡ç›‘æ§ (ç¼ºå¤±)
GET    /api/cleaning/quality/metrics        # æ¸…æ´—è´¨é‡æŒ‡æ ‡
GET    /api/cleaning/quality/errors         # æ¸…æ´—é”™è¯¯ç»Ÿè®¡
POST   /api/cleaning/quality/alerts/set     # è´¨é‡å‘Šè­¦è®¾ç½®
GET    /api/cleaning/quality/reports        # è´¨é‡æŠ¥å‘Š

# SIMDä¼˜åŒ–æ§åˆ¶ (ç¼ºå¤±)
GET    /api/cleaning/simd/status            # SIMDä¼˜åŒ–çŠ¶æ€
POST   /api/cleaning/simd/enable            # å¯ç”¨SIMDä¼˜åŒ–
POST   /api/cleaning/simd/disable           # ç¦ç”¨SIMDä¼˜åŒ–
GET    /api/cleaning/simd/performance       # SIMDæ€§èƒ½å¯¹æ¯”
```

### **3.3 ç³»ç»Ÿæ€§èƒ½å®æ—¶è°ƒä¼˜ - éƒ¨åˆ†ç¼ºå¤± (18ä¸ªæ¥å£)**

**ç¨‹åºå‘˜éœ€æ±‚**: "éœ€è¦èƒ½å¤Ÿå®æ—¶è°ƒæ•´ç³»ç»Ÿæ€§èƒ½å‚æ•°ï¼Œä¸é‡å¯ç³»ç»Ÿ"

```http
# CPUæ€§èƒ½è°ƒä¼˜ (ç¼ºå¤±)
GET    /api/performance/cpu/affinity        # CPUäº²å’Œæ€§é…ç½®
PUT    /api/performance/cpu/affinity        # è®¾ç½®CPUäº²å’Œæ€§
GET    /api/performance/cpu/utilization     # CPUåˆ©ç”¨ç‡ç›‘æ§
POST   /api/performance/cpu/optimize        # CPUä¼˜åŒ–å»ºè®®

# å†…å­˜æ€§èƒ½è°ƒä¼˜ (ç¼ºå¤±)
GET    /api/performance/memory/pools        # å†…å­˜æ± çŠ¶æ€
PUT    /api/performance/memory/pools/resize # è°ƒæ•´å†…å­˜æ± å¤§å°
GET    /api/performance/memory/gc/stats     # GCç»Ÿè®¡ä¿¡æ¯
POST   /api/performance/memory/gc/trigger   # æ‰‹åŠ¨è§¦å‘GC

# ç½‘ç»œæ€§èƒ½è°ƒä¼˜ (ç¼ºå¤±)
GET    /api/performance/network/connections # ç½‘ç»œè¿æ¥çŠ¶æ€
PUT    /api/performance/network/timeouts    # è°ƒæ•´è¶…æ—¶é…ç½®
GET    /api/performance/network/latency     # ç½‘ç»œå»¶è¿Ÿç›‘æ§
POST   /api/performance/network/optimize    # ç½‘ç»œä¼˜åŒ–

# çº¿ç¨‹æ± è°ƒä¼˜ (ç¼ºå¤±)
GET    /api/performance/threads/pools       # çº¿ç¨‹æ± çŠ¶æ€
PUT    /api/performance/threads/pools/resize # è°ƒæ•´çº¿ç¨‹æ± å¤§å°
GET    /api/performance/threads/utilization # çº¿ç¨‹åˆ©ç”¨ç‡
POST   /api/performance/threads/rebalance   # çº¿ç¨‹é‡æ–°å¹³è¡¡

# ç¼“å­˜æ€§èƒ½è°ƒä¼˜ (ç¼ºå¤±)
GET    /api/performance/cache/stats         # ç¼“å­˜ç»Ÿè®¡ä¿¡æ¯
PUT    /api/performance/cache/config        # ç¼“å­˜é…ç½®è°ƒæ•´
POST   /api/performance/cache/clear         # æ¸…ç†ç¼“å­˜
GET    /api/performance/cache/hit-rate      # ç¼“å­˜å‘½ä¸­ç‡
```

### **3.4 æ•…éšœè‡ªæ„ˆæœºåˆ¶æ§åˆ¶ - å®Œå…¨ç¼ºå¤± (16ä¸ªæ¥å£)**

**ç¨‹åºå‘˜éœ€æ±‚**: "éœ€è¦é…ç½®å’Œæ§åˆ¶è‡ªåŠ¨æ•…éšœæ¢å¤æœºåˆ¶"

```http
# æ•…éšœæ£€æµ‹é…ç½® (ç¼ºå¤±)
GET    /api/fault/detection/rules           # æ•…éšœæ£€æµ‹è§„åˆ™
POST   /api/fault/detection/rules/create    # åˆ›å»ºæ£€æµ‹è§„åˆ™
PUT    /api/fault/detection/rules/{id}      # æ›´æ–°æ£€æµ‹è§„åˆ™
DELETE /api/fault/detection/rules/{id}      # åˆ é™¤æ£€æµ‹è§„åˆ™

# è‡ªæ„ˆç­–ç•¥ç®¡ç† (ç¼ºå¤±)
GET    /api/fault/recovery/strategies       # è‡ªæ„ˆç­–ç•¥åˆ—è¡¨
POST   /api/fault/recovery/strategies/create # åˆ›å»ºè‡ªæ„ˆç­–ç•¥
PUT    /api/fault/recovery/strategies/{id}  # æ›´æ–°è‡ªæ„ˆç­–ç•¥
POST   /api/fault/recovery/strategies/test  # æµ‹è¯•è‡ªæ„ˆç­–ç•¥

# æ•…éšœå†å²åˆ†æ (ç¼ºå¤±)
GET    /api/fault/history/incidents         # æ•…éšœå†å²è®°å½•
GET    /api/fault/history/patterns          # æ•…éšœæ¨¡å¼åˆ†æ
GET    /api/fault/history/mttr              # å¹³å‡ä¿®å¤æ—¶é—´
GET    /api/fault/history/prevention        # æ•…éšœé¢„é˜²å»ºè®®

# å®æ—¶æ•…éšœæ§åˆ¶ (ç¼ºå¤±)
GET    /api/fault/realtime/status           # å®æ—¶æ•…éšœçŠ¶æ€
POST   /api/fault/realtime/manual-recovery  # æ‰‹åŠ¨æ•…éšœæ¢å¤
POST   /api/fault/realtime/escalate         # æ•…éšœå‡çº§
GET    /api/fault/realtime/recovery-progress # æ¢å¤è¿›åº¦æŸ¥è¯¢
```

---

## ğŸ“‹ **4. å®Œæ•´ç¼ºå¤±APIæ¥å£ç»Ÿè®¡**

### **4.1 æŒ‰åŠŸèƒ½æ¨¡å—ç»Ÿè®¡**

| åŠŸèƒ½æ¨¡å— | äº¤æ˜“å‘˜è§†è§’ç¼ºå¤± | ç¨‹åºå‘˜è§†è§’ç¼ºå¤± | æ€»è®¡ç¼ºå¤± |
|---------|---------------|---------------|----------|
| **ä»“ä½ç®¡ç†** | 18ä¸ª | 0ä¸ª | 18ä¸ª |
| **èµ„é‡‘æµæ°´** | 15ä¸ª | 0ä¸ª | 15ä¸ª |
| **ç»©æ•ˆåˆ†æ** | 20ä¸ª | 0ä¸ª | 20ä¸ª |
| **æœºä¼šè¿½è¸ª** | 16ä¸ª | 0ä¸ª | 16ä¸ª |
| **AIæ¨¡å‹ç®¡ç†** | 0ä¸ª | 25ä¸ª | 25ä¸ª |
| **æ•°æ®æ¸…æ´—** | 0ä¸ª | 22ä¸ª | 22ä¸ª |
| **æ€§èƒ½è°ƒä¼˜** | 0ä¸ª | 18ä¸ª | 18ä¸ª |
| **æ•…éšœè‡ªæ„ˆ** | 0ä¸ª | 16ä¸ª | 16ä¸ª |
| **é…ç½®ä¸­å¿ƒ** | 5ä¸ª | 12ä¸ª | 17ä¸ª |
| **è®¢å•æ‰§è¡Œ** | 8ä¸ª | 5ä¸ª | 13ä¸ª |
| **ç›‘æ§å‘Šè­¦** | 3ä¸ª | 7ä¸ª | 10ä¸ª |
| **æ•°æ®ç®¡ç†** | 2ä¸ª | 8ä¸ª | 10ä¸ª |

### **4.2 ä¼˜å…ˆçº§åˆ†ç±»**

#### **P0 - ç«‹å³å®ç° (äº¤æ˜“æ ¸å¿ƒåŠŸèƒ½)**
- å®æ—¶ä»“ä½ç®¡ç† API (18ä¸ª)
- èµ„é‡‘æµæ°´ç›‘æ§ API (15ä¸ª)  
- AIæ¨¡å‹ç”Ÿå‘½å‘¨æœŸç®¡ç† API (25ä¸ª)
- æ•°æ®æ¸…æ´—ç²¾ç»†åŒ–é…ç½® API (22ä¸ª)
- **å°è®¡: 80ä¸ªæ¥å£**

#### **P1 - çŸ­æœŸå®ç° (åˆ†æä¼˜åŒ–åŠŸèƒ½)**
- äº¤æ˜“ç»©æ•ˆåˆ†æ API (20ä¸ª)
- å¸‚åœºæœºä¼šè¿½è¸ª API (16ä¸ª)
- ç³»ç»Ÿæ€§èƒ½å®æ—¶è°ƒä¼˜ API (18ä¸ª)
- **å°è®¡: 54ä¸ªæ¥å£**

#### **P2 - é•¿æœŸå®ç° (é«˜çº§åŠŸèƒ½)**
- æ•…éšœè‡ªæ„ˆæœºåˆ¶æ§åˆ¶ API (16ä¸ª)
- å…¶ä»–è¾…åŠ©åŠŸèƒ½ API (39ä¸ª)
- **å°è®¡: 55ä¸ªæ¥å£**

**æ€»è®¡ç¼ºå¤±: 189ä¸ªAPIæ¥å£**

---

## ğŸ› ï¸ **5. ä¿æŠ¤æ€§ç»Ÿä¸€å®æ–½æ–¹æ¡ˆ**

### **5.1 é˜¶æ®µ1: æ™ºèƒ½ä»£ç†å±‚éƒ¨ç½² (1å¤©)**

#### **å®ç°æ­¥éª¤**
```bash
# 1. åˆ›å»ºç»Ÿä¸€ä»£ç†æœåŠ¡å™¨ (ä¸å½±å“ç°æœ‰æœåŠ¡)
mkdir -p /home/ubuntu/5.1xitong/unified-gateway
cd /home/ubuntu/5.1xitong/unified-gateway

# 2. å®ç°ä»£ç†é€»è¾‘
cargo new --bin unified-gateway
cd unified-gateway
```

#### **ä»£ç†æœåŠ¡å™¨å®ç°**
```rust
// Cargo.toml
[dependencies]
axum = "0.7"
tokio = { version = "1.0", features = ["full"] }
reqwest = { version = "0.11", features = ["json"] }
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
tower = "0.4"
tower-http = { version = "0.4", features = ["cors"] }

// src/main.rs
use axum::{
    routing::{get, post, put, delete},
    Router, Json, extract::Path,
    response::Json as ResponseJson,
    http::StatusCode,
};
use std::collections::HashMap;
use serde_json::Value;

#[tokio::main]
async fn main() {
    let app = Router::new()
        // é€šç”¨è·¯ç”±ä»£ç†
        .route("/api/*path", get(proxy_handler))
        .route("/api/*path", post(proxy_handler))
        .route("/api/*path", put(proxy_handler))
        .route("/api/*path", delete(proxy_handler));
    
    println!("ğŸŒ ç»Ÿä¸€APIç½‘å…³å¯åŠ¨: http://localhost:3000");
    axum::Server::bind(&"0.0.0.0:3000".parse().unwrap())
        .serve(app.into_make_service())
        .await
        .unwrap();
}

async fn proxy_handler(Path(path): Path<String>) -> Result<ResponseJson<Value>, StatusCode> {
    let target_server = route_to_server(&path);
    let response = forward_request(&path, target_server).await?;
    Ok(ResponseJson(response))
}

fn route_to_server(path: &str) -> &'static str {
    match path {
        // è®¤è¯å’Œç³»ç»Ÿæ§åˆ¶ -> ä¸»ç½‘å…³
        p if p.starts_with("auth/") || p.starts_with("system/") => "http://localhost:8080",
        
        // æ•°æ®å¤„ç† -> QingXi API
        p if p.starts_with("qingxi/") || p.starts_with("data/") => "http://localhost:50061",
        
        // é…ç½®ç®¡ç† -> æ–°å¢é…ç½®æœåŠ¡å™¨
        p if p.starts_with("config/") => "http://localhost:3001",
        
        // ä»“ä½ç®¡ç† -> æ–°å¢äº¤æ˜“æœåŠ¡å™¨
        p if p.starts_with("positions/") || p.starts_with("funds/") => "http://localhost:3002",
        
        // AIæ¨¡å‹ç®¡ç† -> æ–°å¢AIæœåŠ¡å™¨
        p if p.starts_with("ml/") => "http://localhost:3003",
        
        // é»˜è®¤ -> ä¸»ç½‘å…³
        _ => "http://localhost:8080"
    }
}
```

### **5.2 é˜¶æ®µ2: æ–°å¢ä¸“ç”¨APIæœåŠ¡å™¨ (3å¤©)**

#### **é…ç½®æœåŠ¡å™¨ (localhost:3001)**
```rust
// ä¸“é—¨å¤„ç†æ‰€æœ‰é…ç½®ç›¸å…³API
// å®ç°22ä¸ªæ•°æ®æ¸…æ´—é…ç½®API
// å®ç°17ä¸ªé…ç½®ä¸­å¿ƒæ ¸å¿ƒAPI
```

#### **äº¤æ˜“æœåŠ¡å™¨ (localhost:3002)**
```rust
// ä¸“é—¨å¤„ç†äº¤æ˜“ç›¸å…³API
// å®ç°18ä¸ªå®æ—¶ä»“ä½ç®¡ç†API
// å®ç°15ä¸ªèµ„é‡‘æµæ°´ç›‘æ§API
// å®ç°20ä¸ªäº¤æ˜“ç»©æ•ˆåˆ†æAPI
```

#### **AIæœåŠ¡å™¨ (localhost:3003)**
```rust
// ä¸“é—¨å¤„ç†AIæ¨¡å‹ç›¸å…³API  
// å®ç°25ä¸ªAIæ¨¡å‹ç”Ÿå‘½å‘¨æœŸç®¡ç†API
// å®ç°16ä¸ªæœºä¼šè¿½è¸ªAPI
```

### **5.3 é˜¶æ®µ3: å‰ç«¯SDKé€‚é… (1å¤©)**

#### **å‰ç«¯é…ç½®ä¿®æ”¹**
```typescript
// å‰ç«¯åªéœ€è¦ä¿®æ”¹ä¸€ä¸ªé…ç½®æ–‡ä»¶
// src/config/api.ts
export const API_CONFIG = {
  // ç»Ÿä¸€å…¥å£ - æ‰€æœ‰è¯·æ±‚é€šè¿‡ä»£ç†
  baseURL: 'http://localhost:3000/api',
  
  // ä¿æŒç°æœ‰çš„é”™è¯¯å¤„ç†å’Œè®¤è¯é€»è¾‘ä¸å˜
  timeout: 30000,
  retries: 3,
};

// ç°æœ‰çš„APIè°ƒç”¨ä»£ç å®Œå…¨ä¸éœ€è¦ä¿®æ”¹
// ä»£ç†å±‚ä¼šè‡ªåŠ¨è·¯ç”±åˆ°æ­£ç¡®çš„åç«¯æœåŠ¡å™¨
```

---

## ğŸ“Š **6. å®æ–½æ•ˆæœé¢„æœŸ**

### **6.1 ç»Ÿä¸€å‰ vs ç»Ÿä¸€åå¯¹æ¯”**

| æŒ‡æ ‡ | ç»Ÿä¸€å‰ | ç»Ÿä¸€å | æ”¹å–„åº¦ |
|------|--------|--------|--------|
| **APIç«¯ç‚¹** | 3ä¸ªåˆ†æ•£ç«¯å£ | 1ä¸ªç»Ÿä¸€å…¥å£ | â¬†ï¸ 300% |
| **åŠŸèƒ½è¦†ç›–** | çº¦50% | 100% | â¬†ï¸ 100% |
| **äº¤æ˜“å‘˜å¯ç”¨åŠŸèƒ½** | åŸºç¡€æ“ä½œ | å®Œæ•´äº¤æ˜“æµç¨‹ | â¬†ï¸ 500% |
| **ç¨‹åºå‘˜å¯ç”¨åŠŸèƒ½** | åŸºç¡€é…ç½® | å®Œæ•´æŠ€æœ¯æ ˆç®¡ç† | â¬†ï¸ 400% |
| **å‰ç«¯å¼€å‘å¤æ‚åº¦** | é«˜ (3å¥—é…ç½®) | ä½ (1å¥—é…ç½®) | â¬†ï¸ 200% |
| **ç³»ç»Ÿç»´æŠ¤æˆæœ¬** | é«˜ (åˆ†æ•£ç®¡ç†) | ä½ (ç»Ÿä¸€ç®¡ç†) | â¬†ï¸ 150% |

### **6.2 ä¸šåŠ¡ä»·å€¼æå‡**

#### **äº¤æ˜“å‘˜ä»·å€¼**
- âœ… **å®æ—¶é£æ§**: éšæ—¶æŸ¥çœ‹ä»“ä½å’Œé£é™©çŠ¶å†µ
- âœ… **ç²¾å‡†åˆ†æ**: è¯¦ç»†çš„äº¤æ˜“ç»©æ•ˆå’Œæœºä¼šåˆ†æ
- âœ… **å¿«é€Ÿå“åº”**: ä¸€é”®æ“ä½œä»“ä½è°ƒæ•´å’Œèµ„é‡‘ç®¡ç†
- âœ… **å†³ç­–æ”¯æŒ**: åŸºäºå†å²æ•°æ®çš„æ™ºèƒ½å†³ç­–å»ºè®®

#### **ç¨‹åºå‘˜ä»·å€¼**
- âœ… **å®Œæ•´æ§åˆ¶**: AIæ¨¡å‹ä»è®­ç»ƒåˆ°éƒ¨ç½²çš„å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†
- âœ… **ç²¾ç»†è°ƒä¼˜**: äº¤æ˜“æ‰€çº§åˆ«çš„æ•°æ®æ¸…æ´—å’Œæ€§èƒ½è°ƒä¼˜
- âœ… **è‡ªåŠ¨åŒ–è¿ç»´**: æ•…éšœè‡ªæ„ˆå’Œç³»ç»Ÿè‡ªä¼˜åŒ–èƒ½åŠ›
- âœ… **å¼€å‘æ•ˆç‡**: ç»Ÿä¸€çš„APIæ¥å£å¤§å¹…æå‡å¼€å‘é€Ÿåº¦

---

## ğŸ¯ **7. å®æ–½æ—¶é—´è¡¨**

### **ç¬¬1å‘¨: åŸºç¡€ç»Ÿä¸€**
- **Day 1**: éƒ¨ç½²æ™ºèƒ½ä»£ç†ç½‘å…³
- **Day 2-3**: å®ç°é…ç½®æœåŠ¡å™¨ (39ä¸ªAPI)
- **Day 4-5**: å®ç°äº¤æ˜“æœåŠ¡å™¨ (53ä¸ªAPI)

### **ç¬¬2å‘¨: åŠŸèƒ½è¡¥å…¨**
- **Day 1-2**: å®ç°AIæœåŠ¡å™¨ (41ä¸ªAPI)
- **Day 3-4**: å®ç°æ€§èƒ½è°ƒä¼˜API (18ä¸ªAPI)
- **Day 5**: å‰ç«¯SDKé€‚é…å’Œæµ‹è¯•

### **ç¬¬3å‘¨: ä¼˜åŒ–å®Œå–„**
- **Day 1-3**: å®ç°æ•…éšœè‡ªæ„ˆAPI (16ä¸ªAPI)
- **Day 4-5**: ç³»ç»Ÿæ•´åˆæµ‹è¯•å’Œæ€§èƒ½ä¼˜åŒ–

---

## ğŸ‰ **ç»“è®ºä¸å»ºè®®**

### **æ ¸å¿ƒå‘ç°**
1. **ç¼ºå¤±ä¸¥é‡**: å‘ç°189ä¸ªå…³é”®APIæ¥å£ç¼ºå¤±ï¼Œè¿œè¶…é¢„æœŸ
2. **æ–¹æ¡ˆå¯è¡Œ**: ä¿æŠ¤æ€§ç»Ÿä¸€æ–¹æ¡ˆæŠ€æœ¯å¯è¡Œï¼Œé£é™©å¯æ§
3. **ä»·å€¼å·¨å¤§**: ç»Ÿä¸€åå°†å¤§å¹…æå‡äº¤æ˜“å‘˜å’Œç¨‹åºå‘˜çš„å·¥ä½œæ•ˆç‡
4. **å®æ–½ç®€å•**: åˆ†é˜¶æ®µå®æ–½ï¼Œæ€»è®¡3å‘¨å®Œæˆ

### **ç«‹å³è¡ŒåŠ¨å»ºè®®**
1. **å¯åŠ¨é¡¹ç›®**: ç«‹å³å¯åŠ¨APIç»Ÿä¸€åŒ–é¡¹ç›®
2. **åˆ†å·¥æ˜ç¡®**: äº¤æ˜“åŠŸèƒ½APIä¼˜å…ˆï¼ŒæŠ€æœ¯åŠŸèƒ½APIå¹¶è¡Œ
3. **ä¿æŠ¤ç°æœ‰**: ä¸¥æ ¼éµå¾ªä¸ç ´åç°æœ‰æœåŠ¡å™¨çš„åŸåˆ™
4. **å¿«é€Ÿè¿­ä»£**: æ¯å‘¨å‘å¸ƒä¸€ä¸ªç‰ˆæœ¬ï¼Œå¿«é€Ÿè·å¾—åé¦ˆ

**è¿™æ˜¯5.1å¥—åˆ©ç³»ç»Ÿèµ°å‘å®Œæ•´å’Œæˆç†Ÿçš„å…³é”®ä¸€æ­¥ï¼Œå¼ºçƒˆå»ºè®®ç«‹å³å®æ–½ï¼** 