# 前端访问故障排查报告
日期：2025-09-04
问题：无法从外部访问前端服务（ERR_CONNECTION_TIMED_OUT）

## 诊断结果

### ✅ 服务状态正常
- 前端服务运行正常（端口80）
- 后端服务运行正常（端口8080）
- 本地curl测试成功（HTTP 200）

### 🔍 网络配置
- **内网IP**：172.31.26.146
- **公网IP**：35.76.124.44
- **前端地址**：http://localhost:80/（本地正常）
- **iptables**：规则为ACCEPT（无阻拦）

## 问题原因

**AWS EC2安全组未开放80端口**

这是AWS EC2实例的安全组配置问题，不是应用程序问题。

## 解决方案

### 方法1：配置AWS安全组（推荐）
1. 登录AWS控制台
2. 进入EC2 -> 安全组
3. 找到当前实例的安全组
4. 添加入站规则：
   - 类型：HTTP
   - 端口：80
   - 来源：0.0.0.0/0（或指定IP范围）

### 方法2：使用SSH隧道（临时方案）
在本地电脑执行：
```bash
ssh -L 8080:localhost:80 -L 8081:localhost:8080 ubuntu@35.76.124.44
```
然后访问：http://localhost:8080

### 方法3：使用其他端口
如果80端口受限，可以：
1. 修改vite.config.ts使用其他端口（如3000）
2. 在安全组开放该端口
3. 重启前端服务

## 当前可用的访问方式

### 内部测试（在服务器上）
```bash
# 测试前端
curl http://localhost:80

# 测试后端API
curl http://localhost:8080/health

# 测试前端代理
curl http://localhost:80/api/health
```

## 系统运行状态

- ✅ 前端进程：运行中（PID: f249df）
- ✅ 后端进程：运行中（PID: 316a9c）
- ✅ 本地访问：正常
- ❌ 外网访问：被AWS安全组阻止

## 建议

1. **立即行动**：配置AWS安全组开放80端口
2. **安全考虑**：可以限制来源IP以提高安全性
3. **备选方案**：如果无法修改安全组，使用SSH隧道进行测试