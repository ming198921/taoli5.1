# ğŸš€ é«˜çº§æ¨¡å—é…ç½®æ–‡ä»¶
# å¤šçº§å®¡æ‰¹å·¥ä½œæµã€What-ifåœºæ™¯æ¨æ¼”å¹³å°ã€ç¬¬ä¸‰æ–¹æ•°æ®æºé›†æˆ

[approval_workflow]
# å®¡æ‰¹å·¥ä½œæµé…ç½®
enabled = true
default_timeout_hours = 24
allow_self_approval = false
require_digital_signature = true
audit_log_retention_days = 365

# å®¡æ‰¹è§„åˆ™é…ç½®
[[approval_workflow.rules]]
rule_id = "high_risk_config"
name = "é«˜é£é™©é…ç½®å˜æ›´"
description = "æ¶‰åŠæ ¸å¿ƒäº¤æ˜“å‚æ•°çš„å˜æ›´"
config_type_pattern = "trading|execution|risk"
change_types = ["update", "create", "delete"]
required_levels = ["SeniorApprover", "Administrator"]
min_approvers = 2
all_levels_required = true
timeout_seconds = 86400  # 24å°æ—¶

[[approval_workflow.rules]]
rule_id = "medium_risk_config"
name = "ä¸­ç­‰é£é™©é…ç½®å˜æ›´"
description = "æ¶‰åŠç­–ç•¥å‚æ•°çš„å˜æ›´"
config_type_pattern = "strategy|opportunity"
change_types = ["update", "create"]
required_levels = ["JuniorApprover"]
min_approvers = 1
all_levels_required = false
timeout_seconds = 43200  # 12å°æ—¶

[[approval_workflow.rules]]
rule_id = "low_risk_config"
name = "ä½é£é™©é…ç½®å˜æ›´"
description = "ç›‘æ§å’Œæ—¥å¿—é…ç½®å˜æ›´"
config_type_pattern = "monitoring|logging"
change_types = ["update"]
required_levels = []
min_approvers = 0
all_levels_required = false
# è‡ªåŠ¨æ‰¹å‡†

# å®¡æ‰¹è€…é…ç½®
[[approval_workflow.approvers]]
id = "admin001"
name = "ç³»ç»Ÿç®¡ç†å‘˜"
email = "admin@arbitrage.com"
level = "Administrator"
department = "æŠ€æœ¯éƒ¨"
active = true

[[approval_workflow.approvers]]
id = "senior001"
name = "é«˜çº§å®¡æ‰¹å‘˜"
email = "senior@arbitrage.com"
level = "SeniorApprover"
department = "é£æ§éƒ¨"
active = true

[[approval_workflow.approvers]]
id = "junior001"
name = "åˆçº§å®¡æ‰¹å‘˜"
email = "junior@arbitrage.com"
level = "JuniorApprover"
department = "äº¤æ˜“éƒ¨"
active = true

[whatif_platform]
# What-ifåœºæ™¯æ¨æ¼”å¹³å°é…ç½®
enabled = true
max_concurrent_simulations = 10
simulation_timeout_minutes = 60
historical_data_retention_days = 90

# é¢„å®šä¹‰åœºæ™¯é…ç½®
[[whatif_platform.scenarios]]
scenario_id = "high_volatility"
name = "é«˜æ³¢åŠ¨æ€§åœºæ™¯"
description = "æ¨¡æ‹Ÿæç«¯å¸‚åœºæ³¢åŠ¨æƒ…å†µ"
scenario_type = "VolatilityShock"
multiplier = 3.0
duration_minutes = 60
severity = "High"
probability = 0.05

[[whatif_platform.scenarios]]
scenario_id = "liquidity_crisis"
name = "æµåŠ¨æ€§å±æœº"
description = "æ¨¡æ‹Ÿä¸»è¦äº¤æ˜“æ‰€æµåŠ¨æ€§æ¯ç«­"
scenario_type = "LiquidityDrain"
reduction_percentage = 80.0
affected_exchanges = ["binance", "okx", "huobi"]
severity = "Critical"
probability = 0.01

[[whatif_platform.scenarios]]
scenario_id = "exchange_outage"
name = "äº¤æ˜“æ‰€æ•…éšœ"
description = "æ¨¡æ‹Ÿä¸»è¦äº¤æ˜“æ‰€æœåŠ¡ä¸­æ–­"
scenario_type = "ExchangeOutage"
exchange = "binance"
duration_minutes = 120
severity = "High"
probability = 0.02

[[whatif_platform.scenarios]]
scenario_id = "network_latency"
name = "ç½‘ç»œå»¶è¿Ÿæ¿€å¢"
description = "æ¨¡æ‹Ÿç½‘ç»œåŸºç¡€è®¾æ–½é—®é¢˜"
scenario_type = "NetworkLatency"
additional_ms = 500
affected_routes = ["binance", "okx"]
severity = "Medium"
probability = 0.1

[third_party_integration]
# ç¬¬ä¸‰æ–¹æ•°æ®æºé›†æˆé…ç½®
enabled = true
max_concurrent_sources = 20
data_fusion_algorithm = "weighted_average"
quality_monitoring_interval_minutes = 5
cache_ttl_seconds = 300

# CoinGeckoé…ç½®
[third_party_integration.coingecko]
enabled = true
priority = 8
reliability_score = 0.95
base_url = "https://api.coingecko.com"
rate_limit_per_minute = 50
timeout_seconds = 10
max_latency_ms = 5000
min_update_frequency_ms = 30000
max_price_deviation_percentage = 2.0

# CoinMarketCapé…ç½®
[third_party_integration.coinmarketcap]
enabled = true
priority = 7
reliability_score = 0.9
base_url = "https://pro-api.coinmarketcap.com"
rate_limit_per_minute = 333
timeout_seconds = 15
max_latency_ms = 8000
min_update_frequency_ms = 60000
max_price_deviation_percentage = 3.0
# api_key = "${CMC_API_KEY}"  # ä»ç¯å¢ƒå˜é‡è·å–

# Messarié…ç½®
[third_party_integration.messari]
enabled = false
priority = 6
reliability_score = 0.85
base_url = "https://data.messari.io"
rate_limit_per_minute = 20
timeout_seconds = 20

# CryptoCompareé…ç½®
[third_party_integration.cryptocompare]
enabled = false
priority = 5
reliability_score = 0.8
base_url = "https://min-api.cryptocompare.com"
rate_limit_per_minute = 100
timeout_seconds = 15

# æ•°æ®èåˆæƒé‡é…ç½®
[third_party_integration.fusion_weights]
binance = 0.3
coinbase = 0.25
kraken = 0.2
coingecko = 0.15
coinmarketcap = 0.1

# è´¨é‡é˜ˆå€¼é…ç½®
[third_party_integration.quality_thresholds]
min_overall_quality_score = 0.8
max_acceptable_latency_ms = 10000
min_data_freshness_seconds = 60
max_price_deviation_from_consensus = 0.05  # 5%

# æ–°é—»æƒ…æ„Ÿåˆ†æé…ç½®
[third_party_integration.sentiment_analysis]
enabled = false
providers = ["newsapi", "twitter_api"]
sentiment_threshold = 0.6
impact_weight = 0.1
update_frequency_minutes = 15

# é“¾ä¸Šæ•°æ®é…ç½®
[third_party_integration.onchain_data]
enabled = false
blockchains = ["ethereum", "bitcoin", "binance_smart_chain"]
data_types = ["transaction_volume", "whale_movements", "exchange_inflows"]
update_frequency_minutes = 10

# å®è§‚ç»æµæ•°æ®é…ç½®
[third_party_integration.macro_economic]
enabled = false
indicators = ["DXY", "VIX", "GOLD", "US10Y"]
providers = ["fred", "yahoo_finance"]
update_frequency_hours = 1

# ç›‘ç®¡æ–°é—»é…ç½®
[third_party_integration.regulatory_news]
enabled = false
jurisdictions = ["US", "EU", "CN", "JP"]
alert_keywords = ["ban", "regulation", "compliance", "legal"]
providers = ["reuters", "bloomberg"]
update_frequency_hours = 6 